<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leaderboard - JFFT Typing Test</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="navbar">
    <div class="nav-brand">
      <img src="images/JackalTechLogo_svg -dark.png" class="nav-logo" alt="JFFT Logo">
      <span class="nav-title">JFFT</span>
    </div>
    <nav class="nav-menu">
      <a href="dashboard.html" class="nav-link">Dashboard</a>
      <a href="practice.html" class="nav-link">Practice</a>
      <a href="leaderboard.html" class="nav-link active">Leaderboard</a>
      <div class="user-menu">
        <span class="user-name" id="currentUserName">User</span>
        <button class="btn-logout" onclick="logoutUser()">Logout</button>
      </div>
    </nav>
  </header>

  <main class="leaderboard-container">
    <div class="leaderboard-header">
      <h1>Leaderboard</h1>
      <p>See how you rank among other typists</p>
    </div>

    <div class="leaderboard-filters">
      <div class="filter-group">
        <label>Time Period:</label>
        <div class="filter-options">
          <button class="filter-btn active" data-period="all">All Time</button>
          <button class="filter-btn" data-period="week">This Week</button>
          <button class="filter-btn" data-period="month">This Month</button>
        </div>
      </div>
      
      <div class="filter-group">
        <label>Category:</label>
        <div class="filter-options">
          <button class="filter-btn active" data-category="wpm">WPM</button>
          <button class="filter-btn" data-category="accuracy">Accuracy</button>
          <button class="filter-btn" data-category="consistency">Consistency</button>
        </div>
      </div>
    </div>

    <div class="performance-chart">
      <h2>Your Performance</h2>
      <div class="chart-placeholder">
        <img src="images/School Account Management - Teacher - Classes-1.png" alt="Performance Chart" class="perf-chart">
        <div class="chart-stats">
          <div class="chart-stat">
            <span class="chart-value" id="personalBest">0</span>
            <span class="chart-label">Personal Best (WPM)</span>
          </div>
          <div class="chart-stat">
            <span class="chart-value" id="averageScore">0</span>
            <span class="chart-label">Average (WPM)</span>
          </div>
          <div class="chart-stat">
            <span class="chart-value" id="testsCompleted">0</span>
            <span class="chart-label">Tests Completed</span>
          </div>
        </div>
      </div>
    </div>

    <div class="leaderboard-content">
      <div class="top-performers">
        <h2>Top Performers</h2>
        <div class="podium">
          <div class="podium-place second">
            <div class="podium-rank">2</div>
            <div class="podium-user">
              <div class="user-avatar"></div>
              <div class="user-name">Sarah</div>
              <div class="user-score">95 WPM</div>
            </div>
          </div>
          <div class="podium-place first">
            <div class="podium-rank">1</div>
            <div class="podium-user">
              <div class="user-avatar"></div>
              <div class="user-name">Alex</div>
              <div class="user-score">120 WPM</div>
            </div>
          </div>
          <div class="podium-place third">
            <div class="podium-rank">3</div>
            <div class="podium-user">
              <div class="user-avatar"></div>
              <div class="user-name">Mike</div>
              <div class="user-score">88 WPM</div>
            </div>
          </div>
        </div>
      </div>

      <div class="rankings-table">
        <h2>Full Rankings</h2>
        <div class="table-container">
          <table class="leaderboard-table">
            <thead>
              <tr>
                <th>Rank</th>
                <th>User</th>
                <th>WPM</th>
                <th>Accuracy</th>
                <th>Tests</th>
                <th>Last Active</th>
              </tr>
            </thead>
            <tbody id="leaderboardTableBody">
              <!-- Data will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>

      <div class="personal-stats">
        <h2>Your Statistics</h2>
        <div class="stats-cards">
          <div class="stats-card">
            <div class="stats-icon">âš¡</div>
            <div class="stats-info">
              <h3 id="userWPM">0</h3>
              <p>Best WPM</p>
            </div>
          </div>
          <div class="stats-card">
            <div class="stats-icon"></div>
            <div class="stats-info">
              <h3 id="userAccuracy">0%</h3>
              <p>Best Accuracy</p>
            </div>
          </div>
          <div class="stats-card">
            <div class="stats-icon"></div>
            <div class="stats-info">
              <h3 id="userRank">#--</h3>
              <p>Current Rank</p>
            </div>
          </div>
          <div class="stats-card">
            <div class="stats-icon"></div>
            <div class="stats-info">
              <h3 id="userStreak">0</h3>
              <p>Day Streak</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="script.js"></script>
  <script>
    if (!localStorage.getItem("currentUser") && !localStorage.getItem("demoMode")) {
      window.location.href = "index.html";
    }
    
    // Load leaderboard data
    loadLeaderboardData();
  </script>
</body>
</html>
